/**
 * @file Firestore Security Rules for ReliefLink
 * @description This ruleset enforces a data model that segregates user data and public data into different collections.
 *
 * Core Philosophy:
 * This ruleset prioritizes a flexible data model for rapid prototyping, while maintaining secure access controls.
 * All data access is public, without authentications.
 *
 * Data Structure:
 * - /victims/{victimId}: Stores victim profiles.
 * - /volunteers/{volunteerId}: Stores volunteer profiles.
 * - /requests/{requestId}: Stores requests for aid.
 * - /tasks/{taskId}: Stores tasks assigned to volunteers.
 * - /admins/{adminId}: Stores admin UIDs. Existence in this collection grants admin privileges.
 *
 * Key Security Decisions:
 * - Public read and write access to all data.
 *
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read and write victim profiles.
     * @path /victims/{victimId}
     * @allow (get, list, create, update, delete)
     * @principle Allows public access to all data.
     */
    match /victims/{victimId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write volunteer profiles.
     * @path /volunteers/{volunteerId}
     * @allow (get, list, create, update, delete)
     * @principle Allows public access to all data.
     */
    match /volunteers/{volunteerId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write requests.
     * @path /requests/{requestId}
     * @allow (get, list, create, update, delete)
     * @principle Allows public access to all data.
     */
    match /requests/{requestId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write tasks.
     * @path /tasks/{taskId}
     * @allow (get, list, create, update, delete)
     * @principle Allows public access to all data.
     */
    match /tasks/{taskId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write admins.
     * @path /admins/{adminId}
     * @allow (get, list, create, update, delete)
     * @principle Allows public access to all data.
     */
    match /admins/{adminId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}